var App={startApplication:function(){ConnectionStatus.check();bb.pushScreen("home.html","homeScr")},alert:function(n,t){blackberry.ui.dialog.standardAskAsync(n,blackberry.ui.dialog.D_OK,function(){},{title:t})},getValues:function(){var t=localStorage.getItem("lastDurakNo"),i,r,u,n;return t?(u=localStorage.getItem("lastHatNo"),n={durakNo:t,hatNo:u},this.values=n,n):(i="Lütfen bir durak numarası giriniz",r="Durak No",App.alert(i,r),null)},values:null,getBusInfo:function(){var t=App.getValues(),n;if(!t)return null;n=!1;$.each(bb.screens,function(t,i){i.id=="busInfoScr"&&(n=!0)});n==!1&&bb.pushScreen("busInfo.html","busInfoScr");Spinner.on();Connection.doAjaxReq(t)},showBusInfo:function(n){function w(n){var t=n.detay,i,r;return t.indexOf("<br />")!=-1?(i=t.indexOf("<br />")+6,r=t.lastIndexOf("<br />")):t.indexOf("<br/>")!=-1?(i=t.indexOf("<br/>")+5,r=t.lastIndexOf("<br/>")):console.error("hata!! api de 'detay' parametresi değişmiş olabilir"),l=t.substring(i,r)}function a(n){var i=w(n),t="<li><h4>"+n.kodu+", "+n.adi+"<\/h4><label>"+n.detay+"<\/label><\/li>";t+="<hr/>";s=t}var s,f=[],l,h=document.getElementById("dataList"),e,u,c,o,t,i,r,v,y,p;if(this.values!=null&&this.values.hatNo!="")for(e=this.values.hatNo,u=0;u<n.Row;u++)(c=n.Tbl[u],e&&e!="undefined"&&c.kodu!==e)||(a(c),f.push(s));else n.Tbl.forEach(function(n){a(n);f.push(s)});if(Spinner.off(),o=new Date,t=o.getHours(),t<10&&(t="0"+t),i=o.getMinutes(),i<10&&(i="0"+i),r=o.getSeconds(),r<10&&(r="0"+r),v=t+":"+i+":"+r,$("#lblLastUpdateTime").html("Son güncellenme: "+v),$.isEmptyObject(n)||n.Row<1){y="Otobüs bulunamadı..";p="Sonuç";App.alert(y,p);return}try{h.innerHTML=f.join("");h.clear();h.refresh(f)}catch(b){}Timer.start()}};