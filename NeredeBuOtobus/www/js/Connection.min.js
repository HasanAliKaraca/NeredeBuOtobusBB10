var Connection={doAjaxReq:function(n){var r={fnc:"DuraktanGeçecekOtobüsler",prm:"",hat:n.hatNo,durak:n.durakNo},i;if(this.myIp==null&&this.myIp==""){for(this.loadMyIp(),i=Date.now();Date.now-i<1e4;);if(this.myIp==null&&this.myIp==""){alert("şu anki ipiniz alınamadığı için işlem gerçekleştirilemiyor!");return}}var u=Connection.myIp,t="http://www.ego.gov.tr/mobil/mapToDo.asp";t=t+"?AjaxSid="+encodeURI(Math.random())+"&AjaxCid="+encodeURI(u)+"&AjaxApp="+encodeURI("OtobusNerede")+"&AjaxLog=True";$.ajax({type:"POST",url:t,data:r,success:Connection.returnData,error:function(n,t,i){console.warn("error: "+i);App.alert("Bağlantı esnasında hata oluştu. Lütfen tekrar deneyiniz.","Bağlantı hatası");ConnectionStatus.check()}})},returnData:function(n){var t,i;try{if(t=n.replace(/'/g,'"'),t)i=$.parseJSON(t);else{console.log("correctedString: "+t);throw"Data boş döndü!";}}catch(r){return console.warn(r),Spinner.off(),null}App.showBusInfo(i)},myIp:"",loadMyIp:function(){$.getJSON("http://jsonip.com?callback=?",function(n){var t=n.ip;console.log(t);Connection.myIp=t})}};